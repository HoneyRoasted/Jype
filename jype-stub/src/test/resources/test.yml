name: Basic Test YAML

classes:
  honeyroasted/jypestub/Test:
    def: <K::Ljava/util/List<TK;>;>Ljava/lang/Object;
    fields:
      foo: Ljava/lang/Integer;
      bar: TK;
      baz: Ljava/util/Comparator<TK;>;
    methods:
      instance_method: ()V
      static_method:
        def: ()V
        flags: [PUBLIC, STATIC]
      generic_return:
        def: <T:Ljava/lang/Object;>(TT;)TT;
        flags: [PUBLIC, STATIC]

tests:
  simple_inference_test:
    expect:
      - status: true
      - instantiation:
          var: E
          type: Ljava/lang/String;
    constraints:
      - expression_compatible:
          context: ASSIGNMENT
          type: Ljava/util/List<Ljava/lang/String;>;
          expr:
            instantiation:
              type: Ljava/util.ArrayList;
              parameters:
                - instantiation:
                    type: Ljava/lang/Integer;
                    parameters:
                      - constant: 1

  method_chain_test:
    expect:
      - status: true
      - instantiation:
          var: T
          type: Ljava/lang/String;
    constraints:
      - expression_compatible:
          context: ASSIGNMENT
          type: "[B"
          expr:
            invocation:
              name: getBytes
              parameters: []
              source:
                invocation:
                  staticSource: Lhoneyroasted/jypestub/Test;
                  name: generic_return
                  parameters:
                    - constant: Hello World
